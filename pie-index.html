<!DOCTYPE>
<html>
<head>
	<meta charset="utf-8" />
	<title>Pie Chart</title>
	<style type="text/css">
		text {
			font-family: sans-serif;
			font-size: 12px;
			fill: white;
		}
		svg {
			margin-top: 10;
		}
	</style>
</head>
<body>
	<h1>Pie Chart Demo</h1>
	<input type="range" id ="innerRadius" min="0" max="100" value="100">Change innerRadius</input>
	<script type="text/javascript" src="d3.js"></script>
	<script type="text/javascript">
		var dataset = [5, 10, 20, 45, 6, 25],
			w = 800,
			h = 600,
			outerRadius = 150,
			innerRadius = 100,
			isChange = false;
		//Easy color accessible via a 10-step ordinal scale
		var color = d3.scale.category10();
		//Pie layout generated by d3
		var pie = d3.layout.pie();
		//Create svg container
		var mySvg = d3.select("body")
			.append("svg")
			.attr({
				width: w,
				height: h,
			});
		//Arc generator for path
		var arc = d3.svg.arc()
			.innerRadius(innerRadius)
			.outerRadius(outerRadius);
		//Set up groups
		var arcs = mySvg.selectAll("g.arc")
			.data(pie(dataset))
			.enter().append("g")
			.attr("class", "arc")
			.attr("transform", "translate(" + outerRadius + ", " + outerRadius + ")");
		//Draw arc paths
		arcs.append("path")
			.attr("fill", function(d, i) {
				return color(i);
			})
			.attr("d", arc);
		//Add content of each pie
		arcs.append("text")
			.attr("transform", function(d) {
				return "translate(" + arc.centroid(d)+ ")";
			})
			.attr("text-anchor", "middle")
			.text(function(d) {
				return d.value;
			});
		//Add button to change innerRadius
		var input = document.getElementById('innerRadius');
		input.addEventListener("mousedown", function() {
			isChange = true;
		}, false);
		input.addEventListener("mousemove", function(event) {
			if(isChange){
				innerRadius = input.value;
				arc.innerRadius(innerRadius);
				arcs.select("path")
					.attr("d", arc);				
			}
		}, false);
		input.addEventListener("mouseup", function() {
			isChange = false;
		}, false);
	</script>
</body>
</html> 